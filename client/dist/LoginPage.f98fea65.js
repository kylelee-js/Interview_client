import{u as R,a as I,b as D,r as i,c as q,j as o,F as V,d as W,e,I as f,P as M,E as N,S as O,B as g,o as z,f as G,n as H,g as J}from"./index--626b379b.js";import{u as K}from"./index.esm.e732e8e5.js";import{F as Q,f as T,r as U}from"./signupChecker.099554f0.js";import"./index.34b83dad.js";const X=e(Q,{icon:T});function Y(){var d,m;const{register:t,handleSubmit:n,setError:r,formState:{errors:a}}=K(),h=R(l=>{var u;return(u=l.auth.user)==null?void 0:u.isLogin}),B=I(),c=D(),[A,E]=i.exports.useState(!1),[v,y]=i.exports.useState(""),[p,w]=i.exports.useState(!1),F=()=>{w(!p)};q(()=>{B(H()),c("/",{replace:!0})},[h]);const S=async l=>{const u=await z(l);if(console.log(u),(u==null?void 0:u.status)=="200"){console.log(u);const s=u,{access:C,isLogin:k,name:x,nickname:P,pk:j}=s.data;B(G({user:{isLogin:k,name:x,nickname:P,pk:j,justLogin:!0},access:C}))}else if((u==null?void 0:u.status)=="403"){console.log(u);const{response:s}=u,C=s==null?void 0:s.data;C?(y(C.verificationPk),E(!0),r("password",{type:"value",message:"\uC778\uC99D\uC774 \uD655\uC778\uB418\uC9C0 \uC54A\uC740 \uACC4\uC815\uC785\uB2C8\uB2E4. \uC774\uBA54\uC77C\uC744 \uC7AC\uC804\uC1A1\uD574\uC8FC\uC138\uC694."})):r("password",{type:"value",message:"\uC778\uC99D \uC808\uCC28\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."})}else r("password",{type:"value",message:"\uC798\uBABB\uB41C \uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4."})},L=()=>{c("/signup",{replace:!0})},b=()=>{U(v),c("/verification")};return o(V,{children:[o(W,{onSubmit:n(S),children:[e(f,{type:"text",placeholder:"\uC774\uBA54\uC77C \uC8FC\uC18C\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",...t("email",{required:"\uD544\uC218 \uC785\uB825\uCE78\uC785\uB2C8\uB2E4."})}),a.email&&o("div",{style:{color:"red"},children:[" ",(d=a.email)==null?void 0:d.message]}),o(M,{children:[e(f,{type:p?"text":"password",placeholder:"\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",...t("password",{required:"\uD544\uC218 \uC785\uB825\uCE78\uC785\uB2C8\uB2E4."})}),e(N,{onClick:F,children:X})," "]}),a.password&&o("div",{style:{color:"red"},children:[" ",(m=a.password)==null?void 0:m.message]}),e(O,{type:"submit",readOnly:!0,value:"\uB85C\uADF8\uC778"})]}),A&&e(g,{style:{backgroundColor:"blueviolet"},onClick:b,children:"\uC774\uBA54\uC77C \uC7AC\uC804\uC1A1"}),e(g,{onClick:L,children:"\uD68C\uC6D0\uAC00\uC785 \uD560\uB798\uC694"})]})}function eu(){const t=J(),n=D();return i.exports.useEffect(()=>{t.pathname!=="/login"&&n("/login")},[]),e(Y,{})}export{eu as default};
