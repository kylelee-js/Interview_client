import{r as i,j as d,e as t,s as E,T as R,w as l}from"./index--c32ae894.js";function F(r){const[p,a]=i.exports.useState(0),[w,s]=i.exports.useState(0);return i.exports.useEffect(()=>{const c=()=>{r.current&&(a(r.current.clientWidth),s(r.current.clientHeight))};return c(),window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}},[]),{width:p,height:w}}const k=E.div`
  position: fixed;
  /* z-index: ${r=>r.zIndex}; */
  opacity: ${r=>r.opacity};
  left: 50%;
  top: 50%;
  width: 100vw;
  height: 100vh;
  transform: translate(-50%, -50%);
  max-height: 100vh;
  max-width: 100vw;
`,T=E.canvas`
  width: 100%;
  height: 100%;
`,$=[148,132,89,139,140,177,69,90,235,290],y=["01-hero-lightpass","02-head-bob-turn","03-flip-for-guts","04-explode-tips","05-flip-for-nc","06-transparency-head","07-flip-reveal-guts","08-turn-for-chip","09-scoop-turn","10-fall-into-case"];function z({startY:r,children:p,canvasIdx:a,endY:w}){const s=i.exports.useRef(null),c=i.exports.useRef(null),h=i.exports.useRef(null),{width:C,height:f}=F(c);return i.exports.useEffect(()=>{var b;const e=(b=s.current)==null?void 0:b.getContext("2d"),n=new Image,g=1;n.src=`${v}/${y[a]}/${g.toString().padStart(4,"0")}.jpg`,n.onload=()=>{var m,A;e==null||e.drawImage(n,0,0,(m=s.current)==null?void 0:m.width,(A=s.current)==null?void 0:A.height)},s.current&&(s.current.width=C,s.current.height=f);const B=m=>{var A,D;n.src=`${v}/${y[a]}/${(m<1?1:m).toString().padStart(4,"0")}.jpg`,e==null||e.drawImage(n,0,0,(A=s.current)==null?void 0:A.width,(D=s.current)==null?void 0:D.height)},x=()=>{const m=window.scrollY-r,A=w-r,D=m/A,S=Math.min($[a]-1,Math.floor(D*$[a]));console.log(`
        scrollTop : ${m} (${window.scrollY} - ${r})
        maxScroll : ${A}
        frameIndex : ${S}
      `),h.current=requestAnimationFrame(I=>{B(S)})};return window.addEventListener("scroll",x),()=>{window.removeEventListener("scroll",x),cancelAnimationFrame(h.current)}},[C,f,a]),d(k,{ref:c,zIndex:10-a,opacity:1,children:[t(T,{ref:s}),p]})}const L=E.div`
  color: white;
  font-size: 40px;
  font-weight: 600;
  position: fixed;
  left: ${r=>50-r.position[0]}%;
  top: ${r=>50-r.position[1]}%;
  transform: translate(-50%, -50%);
  opacity: 0;
`,j=r=>{const{children:p,start:a,position:w,interval:s=2e3,fontSize:c=34}=r,h=i.exports.useRef(null),C=i.exports.useRef(null);return i.exports.useEffect(()=>{const f=()=>{h.current=requestAnimationFrame(e=>{if(C.current){const n=window.scrollY,B=(s-(n-a))/s;C.current.style.opacity=(1-Math.abs(B)).toString(),C.current.style.transform=`matrix(1, 0, 0, 1, 0, ${40*B})`}})};return window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f),cancelAnimationFrame(h.current)}},[]),t(L,{ref:C,position:w,children:t(R,{component:"div",fontSize:`${c}px`,children:p})})},u=j;function q({canvasIdx:r}){return d(l,{children:[r==0&&d(l,{children:[d(u,{start:0,position:[10,10],fontSize:50,children:[t("b",{children:"\uC18C\uAC1C\uD569\uB2C8\uB2E4"}),t("br",{}),t("h1",{children:"Airpods Pro"})]}),t(u,{start:3e3,position:[0,0],children:"\uADF8 \uB180\uB77C\uC6B4 \uAE30\uB2A5"})]}),r==1&&d(l,{children:[t(u,{start:7e3,position:[1,1],children:"\uB204\uAD6C\uB3C4 \uB530\uB77C\uC62C \uC218 \uC788\uB294 \uC644\uC131\uB3C4"}),t(u,{start:8e3,position:[40,10],children:"\uC6C5\uC7A5\uD568\uACFC \uC138\uBC00\uD568"}),t(u,{start:9e3,position:[20,-20],children:"\uADF8\uB9AC\uACE0 \uC644\uBCBD\uD55C \uB3D9\uAE30\uD654\uAE4C\uC9C0"})]}),r==2&&d(l,{children:[t(u,{start:7e3,position:[1,1],interval:1500,children:"\uB204\uAD6C\uB3C4 \uB530\uB77C\uC62C \uC218 \uC788\uB294 \uC644\uC131\uB3C4"}),t(u,{start:8e3,position:[40,10],interval:1500,children:"\uC6C5\uC7A5\uD568\uACFC \uC138\uBC00\uD568"}),t(u,{start:9e3,position:[20,-20],interval:1500,children:"\uADF8\uB9AC\uACE0 \uC644\uBCBD\uD55C \uB3D9\uAE30\uD654\uAE4C\uC9C0"})]}),r==3&&d(l,{children:[t(u,{start:12500,position:[35,1],interval:1e3,children:"\uC911\uAC04 \uC0AC\uC774\uC988"}),t(u,{start:14e3,position:[10,1],interval:1200,children:"\uC791\uC740 \uC0AC\uC774\uC988"}),t(u,{start:14e3,position:[40,1],interval:1200,children:"\uD070 \uC0AC\uC774\uC988\uC758 \uC774\uC5B4\uD301"})]}),r==4&&d(l,{children:[t(u,{start:24e3,position:[1,1],children:"\uC644\uBCBD\uD55C \uB178\uC774\uC988 \uCE94\uC2AC\uB9C1"}),t(u,{start:28e3,position:[40,10],children:"\uADF8\uB9AC\uACE0 \uC644\uBCBD\uD55C \uC77C\uC0C1 \uCCAD\uC74C\uAE30\uB2A5\uAE4C\uC9C0"})]}),r==5&&d(l,{children:[t(u,{start:22e3,position:[1,1],children:"\uC644\uBCBD\uD55C \uB178\uC774\uC988 \uCE94\uC2AC\uB9C1"}),t(u,{start:24e3,position:[43,30],children:t("p",{style:{color:"black"},children:"\uADF8\uB9AC\uACE0 \uC644\uBCBD\uD55C \uC77C\uC0C1 \uCCAD\uC74C\uAE30\uB2A5\uAE4C\uC9C0"})})]}),r==6&&t(l,{children:t(u,{start:27e3,position:[10,35],interval:1500,children:t("p",{style:{color:"black"},children:"\uCD5C\uC2E0\uC2DD \uC560\uD50C\uC758 \uCE69\uC14B \uD0D1\uC7AC"})})}),r==7&&t(l,{}),r==8&&t(l,{}),r==9&&t(l,{children:t(u,{start:5e4,position:[10,10],children:t("h1",{children:"\uAC10\uC0AC\uD569\uB2C8\uB2E4."})})})]})}const Y=E.div`
  height: 55000px;
  width: 100%;
`,v="https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large",W=[148,132,89,139,140,177,69,90,235,290],o=[0,4904,9278,12227,16833,21472,27337,29623,32605,40392,50001],_=["01-hero-lightpass","02-head-bob-turn","03-flip-for-guts","04-explode-tips","05-flip-for-nc","06-transparency-head","07-flip-reveal-guts","08-turn-for-chip","09-scoop-turn","10-fall-into-case"];function M(){const r=i.exports.useRef(null),p=i.exports.useRef(null),[a,w]=i.exports.useState(-1),[s,c]=i.exports.useState(!1),h=i.exports.useRef(0),C=e=>{h.current=e,e%2==0?c(!1):c(!0)};i.exports.useEffect(()=>{w(h.current),console.log("canvasIdx : ",a)},[s]);const f=()=>{const e=window.scrollY;let n=0;switch(!0){case o[1]>e:break;case(o[1]<=e&&o[2]>e):n=1;break;case(o[2]<=e&&o[3]>e):n=2;break;case(o[3]<=e&&o[4]>e):n=3;break;case(o[4]<=e&&o[5]>e):n=4;break;case(o[5]<=e&&o[6]>e):n=5;break;case(o[6]<=e&&o[7]>e):n=6;break;case(o[7]<=e&&o[8]>e):n=7;break;case(o[8]<=e&&o[9]>e):n=8;break;case o[9]<=e:n=9;break}p.current=requestAnimationFrame(g=>{C(n)})};return i.exports.useEffect(()=>(document.body.style.backgroundColor="black",(()=>{window.preloadImage=[];for(let e=0;e<10;e++)for(let n=0;n<W[e];n++){const g=new Image;g.src=`${v}/${_[e]}/${n.toString().padStart(4,"0")}.jpg`,window.preloadImage.push(g)}})(),window.addEventListener("scroll",f),()=>{document.body.style.backgroundColor="white",cancelAnimationFrame(p.current),window.removeEventListener("scroll",f),delete window.preloadImage}),[]),t(Y,{ref:r,children:[0,1,2,3,4,5,6,7,8,9].map(e=>t("div",{children:a==e&&t(z,{canvasIdx:e,startY:o[e],endY:o[e+1],children:t(q,{canvasIdx:a})})},e))})}function H(){return t(M,{})}export{H as default};
