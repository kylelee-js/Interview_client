import{u as j,a as I,b as D,r as i,c as q,j as a,F as V,d as W,e,I as f,P as M,E as N,S as O,B as g,o as z,f as G,n as H,g as J}from"./index--5cec4531.js";import{u as K}from"./index.esm.58c3bfc7.js";import{F as Q,f as T,o as U}from"./signupApi.5c8add19.js";import"./index.3c60740d.js";const X=e(Q,{icon:T});function Y(){var d,m;const{register:t,handleSubmit:n,setError:r,formState:{errors:o}}=K(),h=j(l=>{var u;return(u=l.auth.user)==null?void 0:u.isLogin}),p=I(),c=D(),[A,E]=i.exports.useState(!1),[v,w]=i.exports.useState(""),[B,y]=i.exports.useState(!1),F=()=>{y(!B)};q(()=>{p(H()),c("/",{replace:!0})},[h]);const S=async l=>{const u=await z(l);if(console.log(u),(u==null?void 0:u.status)=="200"){const s=u,{access:C,isLogin:k,name:x,nickname:P,pk:R}=s.data;p(G({user:{isLogin:k,name:x,nickname:P,pk:R,justLogin:!0},access:C}))}else if((u==null?void 0:u.status)=="403"){const{response:s}=u,C=s==null?void 0:s.data;C?(w(C.verificationPk),E(!0),r("password",{type:"value",message:"\uC778\uC99D\uC774 \uD655\uC778\uB418\uC9C0 \uC54A\uC740 \uACC4\uC815\uC785\uB2C8\uB2E4. \uC774\uBA54\uC77C\uC744 \uC7AC\uC804\uC1A1\uD574\uC8FC\uC138\uC694."})):r("password",{type:"value",message:"\uC778\uC99D \uC808\uCC28\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."})}else r("password",{type:"value",message:"\uC798\uBABB\uB41C \uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4."})},b=()=>{c("/signup",{replace:!0})},L=()=>{U(v),c("/verification")};return a(V,{children:[a(W,{onSubmit:n(S),children:[e(f,{id:"emailInput","aria-label":"email",type:"text",placeholder:"\uC774\uBA54\uC77C \uC8FC\uC18C\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",...t("email",{required:"\uD544\uC218 \uC785\uB825\uCE78\uC785\uB2C8\uB2E4."})}),o.email&&a("div",{style:{color:"red"},children:[" ",(d=o.email)==null?void 0:d.message]}),a(M,{children:[e(f,{"aria-label":"password",type:B?"text":"password",placeholder:"\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",...t("password",{required:"\uD544\uC218 \uC785\uB825\uCE78\uC785\uB2C8\uB2E4."})}),e(N,{onClick:F,children:X})," "]}),o.password&&a("div",{style:{color:"red"},children:[" ",(m=o.password)==null?void 0:m.message]}),e(O,{type:"submit",readOnly:!0,value:"\uB85C\uADF8\uC778"})]}),A&&e(g,{style:{backgroundColor:"blueviolet"},onClick:L,children:"\uC774\uBA54\uC77C \uC7AC\uC804\uC1A1"}),e(g,{onClick:b,children:"\uD68C\uC6D0\uAC00\uC785 \uD560\uB798\uC694"})]})}function eu(){const t=J(),n=D();return i.exports.useEffect(()=>{t.pathname!=="/login"&&n("/login")},[]),e(Y,{})}export{eu as default};
