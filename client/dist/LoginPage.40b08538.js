import{u as j,a as I,b as D,r as i,j as o,F as q,c as V,d as e,I as f,P as W,E as M,S as N,B as g,n as O,o as z,e as G,f as H}from"./index--a1e937cd.js";import{u as J}from"./index.esm.4b33928a.js";import{F as K,f as Q,r as T}from"./signupChecker.54f8f181.js";import{u as U}from"./useDidMountEffect.4a0cdacb.js";import"./index.34b83dad.js";const X=e(K,{icon:Q});function Y(){var d,m;const{register:t,handleSubmit:n,setError:r,formState:{errors:a}}=J(),h=j(l=>{var u;return(u=l.auth.user)==null?void 0:u.isLogin}),B=I(),c=D(),[A,E]=i.exports.useState(!1),[v,y]=i.exports.useState(""),[p,w]=i.exports.useState(!1),F=()=>{w(!p)};U(()=>{B(O()),c("/",{replace:!0})},[h]);const S=async l=>{const u=await z(l);if(console.log(u),(u==null?void 0:u.status)=="200"){console.log(u);const s=u,{access:C}=s.data,{isLogin:k,name:x,nickname:P,pk:R}=s.data;B(G({user:{isLogin:k,name:x,nickname:P,pk:R},access:C}))}else if((u==null?void 0:u.status)=="403"){console.log(u);const{response:s}=u,C=s==null?void 0:s.data;C?(y(C.verificationPk),E(!0),r("password",{type:"value",message:"\uC778\uC99D\uC774 \uD655\uC778\uB418\uC9C0 \uC54A\uC740 \uACC4\uC815\uC785\uB2C8\uB2E4. \uC774\uBA54\uC77C\uC744 \uC7AC\uC804\uC1A1\uD574\uC8FC\uC138\uC694."})):r("password",{type:"value",message:"\uC778\uC99D \uC808\uCC28\uC5D0 \uBB38\uC81C\uAC00 \uC788\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."})}else r("password",{type:"value",message:"\uC798\uBABB\uB41C \uC544\uC774\uB514 \uB610\uB294 \uBE44\uBC00\uBC88\uD638\uC785\uB2C8\uB2E4."})},L=()=>{c("/signup",{replace:!0})},b=()=>{T(v),c("/verification")};return o(q,{children:[o(V,{onSubmit:n(S),children:[e(f,{type:"text",placeholder:"\uC774\uBA54\uC77C \uC8FC\uC18C\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",...t("email",{required:"\uD544\uC218 \uC785\uB825\uCE78\uC785\uB2C8\uB2E4."})}),a.email&&o("div",{style:{color:"red"},children:[" ",(d=a.email)==null?void 0:d.message]}),o(W,{children:[e(f,{type:p?"text":"password",placeholder:"\uBE44\uBC00\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694.",...t("password",{required:"\uD544\uC218 \uC785\uB825\uCE78\uC785\uB2C8\uB2E4."})}),e(M,{onClick:F,children:X})," "]}),a.password&&o("div",{style:{color:"red"},children:[" ",(m=a.password)==null?void 0:m.message]}),e(N,{type:"submit",readOnly:!0,value:"\uB85C\uADF8\uC778"})]}),A&&e(g,{style:{backgroundColor:"blueviolet"},onClick:b,children:"\uC774\uBA54\uC77C \uC7AC\uC804\uC1A1"}),e(g,{onClick:L,children:"\uD68C\uC6D0\uAC00\uC785 \uD560\uB798\uC694"})]})}function su(){const t=H(),n=D();return i.exports.useEffect(()=>{t.pathname!=="/login"&&n("/login")},[]),e(Y,{})}export{su as default};
